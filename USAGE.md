# 使用指南

## 安裝步驟

### 1. 安裝相依套件

```bash
cd watermark-remover
pip install opencv-python numpy Pillow PySide6
```

或使用專案配置安裝（推薦）：

```bash
pip install -e .
```

## 執行程式

### 方法 1：使用執行腳本

```bash
python run.py
```

### 方法 2：直接執行模組

```bash
python -m watermark_remover.main
```

## 使用方式

### 1. 開啟圖像
- 點擊「開啟圖像」按鈕
- 選擇要處理的圖像檔案（支援 PNG、JPG、JPEG、BMP、GIF）

### 2. 選擇浮水印區域

有兩種方式可以選擇浮水印區域：

#### 方法 A：手動選擇（推薦）
1. 在圖像上按住滑鼠左鍵
2. 拖曳滑鼠選擇包含浮水印的矩形區域
3. 放開滑鼠，會看到紅色矩形框
4. 點擊「移除浮水印」按鈕

#### 方法 B：自動偵測
1. 點擊「自動偵測浮水印」按鈕
2. 系統會自動在圖像四個角落尋找浮水印
3. 偵測到的區域會以紅色標記
4. 點擊「移除浮水印」按鈕

### 3. 移除浮水印
- 點擊「移除浮水印」按鈕
- 系統會使用修復算法移除選定區域的浮水印
- 處理可能需要幾秒鐘時間

### 4. 儲存結果
- 點擊「儲存圖像」按鈕
- 選擇儲存位置和檔名
- 建議使用 PNG 格式以保持最佳品質

### 5. 重置圖像
- 如果不滿意結果，可以點擊「重置」按鈕
- 圖像會恢復到原始狀態
- 可以重新選擇區域並再次處理

## 技術說明

### 浮水印移除原理

本工具使用 OpenCV 的修復（Inpainting）算法來移除浮水印：

1. **Telea 算法**：基於快速行進法（Fast Marching Method）
   - 從已知區域向未知區域傳播顏色
   - 適合移除小型文字浮水印
   - 處理速度快

2. **工作流程**：
   - 建立遮罩（Mask）標記浮水印區域
   - 使用周圍像素資訊修復遮罩區域
   - 保持圖像的連續性和自然性

### 適用場景

✅ 適合處理：
- 角落的小型文字浮水印
- 單色或半透明的標誌
- Gemini、ChatGPT 等 AI 生成圖像的浮水印
- 邊緣的簡單標記

⚠️ 可能效果不佳：
- 大面積複雜浮水印
- 重複圖案浮水印
- 位於複雜背景上的浮水印
- 多個分散的浮水印

### 提示與技巧

1. **選擇區域技巧**
   - 盡量精確框選浮水印，避免包含過多背景
   - 可以多次嘗試不同的選擇範圍
   - 對於邊緣的浮水印，自動偵測通常效果較好

2. **處理複雜浮水印**
   - 可以分多次處理，每次移除一部分
   - 先處理較簡單的部分
   - 對於大面積浮水印，建議使用專業軟體

3. **最佳實踐**
   - 使用高解析度原圖
   - 處理前先備份原始圖像
   - 儲存為 PNG 格式避免壓縮損失

## 常見問題

### Q: 為什麼自動偵測找不到浮水印？
A: 自動偵測主要針對圖像四個角落的文字浮水印。如果浮水印位於其他位置或不是文字形式，請使用手動選擇。

### Q: 處理後有殘影怎麼辦？
A: 可以嘗試：
1. 重新選擇更精確的區域
2. 稍微擴大選擇範圍
3. 分多次處理，逐步移除殘影

### Q: 可以處理影片嗎？
A: 目前僅支援靜態圖像。若要處理影片，需要將影片分解為幀後逐幀處理。

## 技術要求

- Python 3.12 或更高版本
- OpenCV (opencv-python)
- NumPy
- Pillow
- PySide6 (Qt for Python)

## 授權與免責聲明

本工具僅供個人學習和合法使用。請確保你有權利修改處理的圖像，並遵守相關版權法規。
