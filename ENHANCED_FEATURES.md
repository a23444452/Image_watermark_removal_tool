# 增強版功能說明

## 概述

增強版圖像浮水印移除工具在原有功能的基礎上，新增了多項專業級功能，提升使用體驗和工作效率。

## 新增功能清單

### 1. 快捷鍵支援 ⌨️

所有主要操作都有對應的鍵盤快捷鍵：

#### 檔案操作
- **Ctrl+O**: 開啟圖像
- **Ctrl+S**: 儲存圖像
- **Ctrl+Shift+S**: 另存新檔
- **Ctrl+Q**: 退出程式

#### 編輯操作
- **Ctrl+Z**: 撤銷上一步操作
- **Ctrl+Y**: 重做已撤銷的操作
- **Ctrl+T**: 重置圖像到原始狀態

#### 檢視操作
- **Ctrl++**: 放大圖像
- **Ctrl+-**: 縮小圖像
- **Ctrl+0**: 重置縮放到 100%
- **Ctrl+滾輪**: 快速縮放

#### 工具操作
- **Ctrl+D**: 自動偵測浮水印
- **Ctrl+R**: 移除浮水印

### 2. 拖放檔案支援 📂

- 可以直接將圖像檔案拖放到視窗中開啟
- 支援 PNG、JPG、JPEG、BMP、GIF 等格式
- 拖放時會自動載入並顯示圖像

**使用方式**：
1. 從檔案管理員選擇圖像檔案
2. 拖曳到程式視窗中
3. 放開滑鼠，圖像自動載入

### 3. 圖像縮放功能 🔍

#### 三種縮放方式

**方式 A: 滑鼠滾輪（推薦）**
- 按住 Ctrl 鍵 + 滾動滑鼠滾輪
- 向上滾動放大，向下滾動縮小
- 最流暢的縮放體驗

**方式 B: 工具列按鈕**
- 點擊 **−** 按鈕縮小
- 點擊 **+** 按鈕放大
- 方便精確控制

**方式 C: 縮放滑桿**
- 拖動視窗底部的縮放滑桿
- 範圍：20% - 500%
- 即時顯示當前縮放比例

#### 縮放特性
- 縮放範圍：20% - 500%
- 選擇區域會自動適應縮放級別
- 縮放時保持圖像品質

### 4. 撤銷/重做功能 ↶↷

#### 歷史記錄系統
- 自動記錄每次操作
- 最多保存 10 個歷史狀態
- 可以在不同版本間自由切換

#### 使用方式
- **撤銷**: Ctrl+Z 或點擊工具列 **↶ 撤銷** 按鈕
- **重做**: Ctrl+Y 或點擊工具列 **↷ 重做** 按鈕
- 按鈕會根據歷史狀態自動啟用/停用

#### 適用場景
- 移除浮水印效果不滿意，可以撤銷重試
- 誤操作時快速恢復
- 比較不同處理結果

### 5. 處理進度對話框 ⏳

#### 即時進度顯示
- 開始處理時顯示進度視窗
- 顯示處理進度百分比
- 提供取消按鈕（可中斷處理）

#### 背景處理
- 使用獨立執行緒處理圖像
- 不會凍結 UI 介面
- 大圖像處理時特別有用

### 6. 選單列 📋

完整的選單系統，包含所有功能：

#### 檔案選單 (Alt+F)
- 開啟圖像 (Ctrl+O)
- 儲存圖像 (Ctrl+S)
- 另存新檔 (Ctrl+Shift+S)
- 退出 (Ctrl+Q)

#### 編輯選單 (Alt+E)
- 撤銷 (Ctrl+Z)
- 重做 (Ctrl+Y)
- 重置圖像 (Ctrl+T)

#### 檢視選單 (Alt+V)
- 放大 (Ctrl++)
- 縮小 (Ctrl+-)
- 重置縮放 (Ctrl+0)

#### 工具選單 (Alt+T)
- 自動偵測浮水印 (Ctrl+D)
- 移除浮水印 (Ctrl+R)

### 7. 工具列 🔧

快速訪問常用功能：
- 📂 開啟
- 🔍 自動偵測
- 🔧 移除浮水印
- ↶ 撤銷
- ↷ 重做
- 💾 儲存
- ↺ 重置

### 8. 改進的狀態列 📊

- 顯示當前操作狀態
- 顯示載入的檔案名稱
- 提供即時操作回饋
- 顯示錯誤和警告訊息

## 版本比較

### 基礎版 vs 增強版

| 功能 | 基礎版 | 增強版 |
|------|--------|--------|
| 基本浮水印移除 | ✓ | ✓ |
| 手動選擇區域 | ✓ | ✓ |
| 自動偵測浮水印 | ✓ | ✓ |
| 快捷鍵支援 | ✗ | ✓ |
| 拖放檔案 | ✗ | ✓ |
| 圖像縮放 | ✗ | ✓ |
| 撤銷/重做 | ✗ | ✓ |
| 處理進度顯示 | ✗ | ✓ |
| 選單列 | ✗ | ✓ |
| 工具列 | ✗ | ✓ |
| 背景處理 | ✗ | ✓ |

## 如何使用增強版

### 啟動增強版
```bash
python run_enhanced.py
```

### 啟動基礎版
```bash
python run.py
```

## 使用技巧

### 1. 快速工作流程
```
拖放圖像 → Ctrl+滾輪縮放查看細節 → 拖曳選擇區域 → Ctrl+R 移除 → Ctrl+S 儲存
```

### 2. 精確選擇
- 使用 Ctrl+滾輪放大圖像
- 精確框選浮水印區域
- 使用 Ctrl+Z 撤銷不滿意的結果

### 3. 批次試驗
- 重置圖像 (Ctrl+T)
- 嘗試不同的選擇區域
- 使用撤銷功能比較結果
- 選擇最佳效果儲存

### 4. 鍵盤操作流程
```
Ctrl+O (開啟) → Ctrl+D (自動偵測) → Ctrl+R (移除) → Ctrl+S (儲存)
```

## 效能優化

### 背景處理
- 圖像處理在獨立執行緒中進行
- UI 保持響應，不會凍結
- 適合處理大型圖像

### 記憶體管理
- 歷史記錄限制為 10 個狀態
- 自動清理不需要的資料
- 優化的圖像存儲方式

## 常見問題

### Q: 如何在增強版和基礎版之間切換？
A:
- 增強版: `python run_enhanced.py`
- 基礎版: `python run.py`

### Q: 快捷鍵在 macOS 上如何使用？
A: 將 Ctrl 替換為 Cmd 鍵即可 (例如 Cmd+O 開啟檔案)

### Q: 可以自定義快捷鍵嗎？
A: 目前版本使用標準快捷鍵，未來版本會考慮自定義選項

### Q: 撤銷功能會影響效能嗎？
A: 歷史記錄限制為 10 個狀態，對效能影響很小

### Q: 拖放檔案支援哪些格式？
A: 支援所有可開啟的圖像格式：PNG、JPG、JPEG、BMP、GIF

## 建議

### 最佳實踐
1. 使用拖放功能快速開啟檔案
2. Ctrl+滾輪縮放查看細節
3. 精確選擇浮水印區域
4. 使用撤銷功能嘗試不同方法
5. 儲存前先檢查結果

### 效率技巧
- 學習並使用快捷鍵
- 利用縮放功能精確選擇
- 善用撤銷/重做比較結果
- 拖放檔案節省時間

## 技術細節

### 新增的技術特性
- **QThread**: 多執行緒處理
- **QProgressDialog**: 進度顯示
- **QAction**: 選單和快捷鍵
- **QToolBar**: 工具列
- **Signal/Slot**: 事件通訊
- **Drag & Drop**: 拖放支援

### 架構改進
- 分離 UI 和處理邏輯
- 非阻塞式處理
- 更好的記憶體管理
- 模組化設計

---

**增強版狀態**: ✅ 測試通過，可用於生產
**推薦使用**: 增強版（更多功能，更好體驗）
